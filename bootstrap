#!/usr/bin/env bash

bootstrap() {
    local iCloud="${HOME}/Library/Mobile Documents/com~apple~CloudDocs"
    local targets=( '.vim' '.vimrc' '.xvimrc' '.zshrc' '.zshenv' '.ipython'
    '.bin' '.tigrc' '.git_template' '.gitignore' '.gitconfig'
    )
    local candidate
    local target
    local dest

    for candidate in "${targets[@]}"; do
        target="$(pwd)/${candidate}"
        dest="$HOME"
        if [[ -f "$target" ]]; then
            ln -sfv -- "$target" "$dest"
        elif [[ -d "$target" ]]; then
            ln -sFv -- "$target" "$dest"
        else
            printf >&2 'No such file or directory: %s\n' "$target"
        fi
    done

    mkdir -p "${HOME}/.vim/backup/undo"
    ln -sFv -- "${iCloud}/Vim/pack" "${HOME}/.vim/pack"
    ln -sFv -- "${iCloud}/Vim/spell" "${HOME}/.vim/spell"
}

bootstrap
